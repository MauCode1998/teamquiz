(this.webpackJsonpteamquiz=this.webpackJsonpteamquiz||[]).push([[0],{107:function(e,t,a){e.exports=a.p+"static/media/logo.9595cc1f.png"},141:function(e,t,a){e.exports=a(156)},148:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(106),s=a.n(o),l=(a(148),a(209)),i=a(202),c=a(216),d=a(200),m=a(221),g=a(107),x=a.n(g),b=a(22),u=a.n(b),p=a(206);const h=p.a.create({baseURL:"",headers:{"Content-Type":"application/json"}});h.interceptors.request.use(e=>{const t=u.a.get("access_token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),h.interceptors.response.use(e=>e,async e=>{var t;const a=e.config;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)&&!a._retry){a._retry=!0;try{const e=u.a.get("refresh_token");if(e){const t=await p.a.post("/refresh",{refresh_token:e}),{access_token:r,refresh_token:n}=t.data;return u.a.set("access_token",r,{expires:1/96}),u.a.set("refresh_token",n,{expires:7}),a.headers.Authorization="Bearer "+r,h(a)}}catch(r){return u.a.remove("access_token"),u.a.remove("refresh_token"),window.location.href="/",Promise.reject(r)}}return Promise.reject(e)});var E=h;const f=Object(r.createContext)(),v=()=>{const e=Object(r.useContext)(f);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},F=e=>{let{children:t}=e;const[a,o]=Object(r.useState)(null),[s,l]=Object(r.useState)(!0);Object(r.useEffect)(()=>{(async()=>{if(u.a.get("access_token"))try{const e=await E.get("/me");o(e.data)}catch(e){console.error("Auth check failed:",e),u.a.remove("access_token"),u.a.remove("refresh_token")}l(!1)})()},[]);const i=()=>u.a.get("access_token"),c={user:a,loading:s,login:async(e,t)=>{try{const a=new URLSearchParams;a.append("username",e),a.append("password",t);const r=await E.post("/login",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{access_token:n,refresh_token:s}=r.data;u.a.set("access_token",n,{expires:1/96}),u.a.set("refresh_token",s,{expires:7});const l=await E.get("/me");return o(l.data),{success:!0}}catch(n){var a,r;return console.error("Login failed:",n),{success:!1,error:(null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.detail)||"Login failed"}}},register:async(e,t,a)=>{try{const r=await E.post("/register",{username:e,email:t,password:a}),{access_token:n,refresh_token:s}=r.data;u.a.set("access_token",n,{expires:1/96}),u.a.set("refresh_token",s,{expires:7});const l=await E.get("/me");return o(l.data),{success:!0}}catch(n){var r;console.error("Registration failed:",n);let e="Registration failed";if((null===(r=n.response)||void 0===r?void 0:r.data)&&n.response.data.detail)if(Array.isArray(n.response.data.detail)){const t=n.response.data.detail[0];(null===t||void 0===t?void 0:t.msg)&&(e=t.msg)}else"string"===typeof n.response.data.detail&&(e=n.response.data.detail);return{success:!1,error:e}}},logout:async()=>{try{await E.post("/logout")}catch(e){console.error("Logout error:",e)}finally{u.a.remove("access_token"),u.a.remove("refresh_token"),o(null)}},isAuthenticated:!!a,token:i(),getToken:i};return n.a.createElement(f.Provider,{value:c},t)};var S=a(8),w=a(18),k=a(217),y=a(95),C=a(198),_=a(199),z=a(219),j=a(215),A=a(83),R=a(229),W=a(57),O=a(220);var B=function(e){let{open:t,onClose:a}=e;const o=Object(S.q)(),[s,l]=Object(r.useState)([]),[c,m]=Object(r.useState)(!1),[g,x]=Object(r.useState)("");Object(r.useEffect)(()=>{t&&b()},[t]);const b=async()=>{m(!0),x("");try{const e=await E.get("/api/invitations/pending");console.log("Fetched invitations:",e.data),l(e.data||[])}catch(g){console.error("Error fetching invitations:",g),x("Fehler beim Laden der Einladungen")}finally{m(!1)}};return n.a.createElement(y.c,{open:t,onClose:a},n.a.createElement(C.a,{sx:{width:"90%",maxWidth:"500px"}},n.a.createElement(_.a,null,"Einladungen",n.a.createElement(d.a,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8}},"\u2715")),n.a.createElement(z.a,null,g&&n.a.createElement(O.a,{color:"danger",sx:{mb:2}},g),c?n.a.createElement(W.c,null,"Lade Einladungen..."):0===s.length?n.a.createElement(W.c,null,"Keine Einladungen vorhanden"):n.a.createElement(j.a,null,s.map(e=>n.a.createElement(A.b,{key:e.invitation_id},n.a.createElement(R.a,null,n.a.createElement(W.c,{level:"title-sm"},"Einladung von ",e.inviter),n.a.createElement(W.c,{level:"body-sm"},"Fach: ",e.subject),n.a.createElement("div",{style:{display:"flex",gap:"8px",marginTop:"8px"}},n.a.createElement(i.a,{size:"sm",color:"success",onClick:()=>(async e=>{try{const t=await E.post("/api/invitation/accept/"+e);t.data.session_id&&(a(),o("/lobby/"+t.data.session_id))}catch(g){console.error("Error accepting invitation:",g),x("Fehler beim Annehmen der Einladung")}})(e.invitation_id)},"Annehmen"),n.a.createElement(i.a,{size:"sm",variant:"outlined",color:"danger",onClick:()=>(async e=>{try{await E.post("/api/invitation/reject/"+e),l(s.filter(t=>t.invitation_id!==e))}catch(g){console.error("Error rejecting invitation:",g),x("Fehler beim Ablehnen der Einladung")}})(e.invitation_id)},"Ablehnen")))))))))};var D=function(){const{user:e,logout:t,isAuthenticated:a}=v(),o=Object(S.q)(),[s,g]=Object(r.useState)(0),[b,u]=Object(r.useState)(!1),[p,h]=Object(r.useState)(!1);Object(r.useEffect)(()=>{if(a){f();const e=setInterval(f,1e4);return()=>clearInterval(e)}},[a]);const f=async()=>{try{const e=(await E.get("/api/invitations/pending")).data||[];g(e.length)}catch(e){console.error("Error fetching invitation count:",e)}},F=async()=>{await t(),o("/")};return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{component:"header",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:{xs:"0 1rem",sm:"0 1.5rem",md:"0 2rem"},position:"relative"}},n.a.createElement(l.a,{component:w.b,to:"/groups",color:"neutral",underline:"none"},n.a.createElement(c.a,{component:"img",src:x.a,sx:{width:{xs:"10rem",sm:"12rem",md:"15rem"},height:{xs:"8rem",sm:"10rem",md:"12rem"},filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.3))",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}}})),n.a.createElement(c.a,{sx:{display:{xs:"none",md:"flex"},alignItems:"center",gap:"1rem"}},a&&n.a.createElement(l.a,{component:w.b,to:"/groups",sx:{color:"#FFF",fontWeight:"bold",fontSize:"1.1rem",textDecoration:"none",background:"rgba(255,255,255,0.1)",borderRadius:"10px",padding:"8px 16px",transition:"all 0.3s ease","&:hover":{background:"rgba(255,255,255,0.2)",transform:"translateY(-2px)",textDecoration:"none"}}},"\ud83c\udfe0 Startseite"),a?n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{badgeContent:s,color:"danger",invisible:0===s},n.a.createElement(d.a,{onClick:()=>u(!0),sx:{background:"rgba(255,255,255,0.15)",color:"#FFF",borderRadius:"12px",fontSize:"1.2rem",border:"2px solid rgba(255,255,255,0.3)",transition:"all 0.3s ease","&:hover":{background:"rgba(255,255,255,0.25)",transform:"scale(1.1)",borderColor:"rgba(255,255,255,0.5)"}}},"\ud83d\udce7")),n.a.createElement("span",{style:{color:"#FFF",fontWeight:"bold",fontSize:"1.1rem",background:"rgba(255,255,255,0.15)",borderRadius:"10px",padding:"8px 12px",backdropFilter:"blur(10px)",textShadow:"0 2px 4px rgba(0,0,0,0.3)"}},"\ud83d\udc64 ",null===e||void 0===e?void 0:e.username),n.a.createElement(i.a,{onClick:F,sx:{background:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"10px",border:"none",fontSize:"1rem",boxShadow:"0 4px 15px rgba(231, 76, 60, 0.3)",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(135deg, #C0392B 0%, #A93226 100%)",transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(231, 76, 60, 0.4)"}}},"\ud83d\udeaa Logout")):n.a.createElement(l.a,{component:w.b,to:"/",sx:{color:"#FFF",fontWeight:"bold",fontSize:"1.1rem",textDecoration:"none",background:"rgba(255,255,255,0.15)",borderRadius:"10px",padding:"8px 16px",transition:"all 0.3s ease","&:hover":{background:"rgba(255,255,255,0.25)",transform:"translateY(-2px)",textDecoration:"none"}}},"\ud83d\udd11 Login")),n.a.createElement(c.a,{sx:{display:{xs:"flex",md:"none"},alignItems:"center",gap:1}},a&&n.a.createElement(k.a,{badgeContent:s,color:"danger",invisible:0===s},n.a.createElement(d.a,{onClick:()=>u(!0),sx:{background:"rgba(255,255,255,0.15)",color:"#FFF",borderRadius:"8px",fontSize:"1.1rem",p:1}},"\ud83d\udce7")),n.a.createElement(d.a,{onClick:()=>h(!p),sx:{background:"rgba(255,255,255,0.15)",color:"#FFF",borderRadius:"8px",fontSize:"1.5rem",p:1,"&:hover":{background:"rgba(255,255,255,0.25)"}}},"\u2630"))),n.a.createElement(m.a,{anchor:"right",open:p,onClose:()=>h(!1),sx:{"& .MuiDrawer-paper":{width:"250px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#FFF"}}},n.a.createElement(c.a,{sx:{p:2}},a?n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{sx:{background:"rgba(255,255,255,0.15)",borderRadius:"10px",p:2,mb:2,textAlign:"center"}},n.a.createElement("span",{style:{fontSize:"1.2rem"}},"\ud83d\udc64 ",null===e||void 0===e?void 0:e.username)),n.a.createElement(i.a,{component:w.b,to:"/groups",onClick:()=>h(!1),fullWidth:!0,sx:{mb:2,color:"#FFF",background:"rgba(255,255,255,0.1)",justifyContent:"flex-start","&:hover":{background:"rgba(255,255,255,0.2)"}}},"\ud83c\udfe0 Startseite"),n.a.createElement(i.a,{onClick:()=>{F(),h(!1)},fullWidth:!0,sx:{background:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)",color:"#FFF",fontWeight:"bold","&:hover":{background:"linear-gradient(135deg, #C0392B 0%, #A93226 100%)"}}},"\ud83d\udeaa Logout")):n.a.createElement(i.a,{component:w.b,to:"/",onClick:()=>h(!1),fullWidth:!0,sx:{color:"#FFF",background:"rgba(255,255,255,0.1)","&:hover":{background:"rgba(255,255,255,0.2)"}}},"\ud83d\udd11 Login"))),a&&n.a.createElement(B,{open:b,onClose:()=>{u(!1),f()}}))},I=a(222),L=a(112),N=a(212),$=a(224),q=a(208),P=a(223),T=a(204),G=a(207),Y=a(213),K=a(226),U=a(227),M=a(218),H=a(225),Z=a(211);var J=function(e){let{groupName:t,showInviteButtons:a=!1,sessionId:o=null,disableWebSocket:s=!1}=e;const[l,c]=Object(r.useState)([]),[d,m]=Object(r.useState)(null),[g,x]=Object(r.useState)({}),[b,u]=Object(r.useState)(""),{getToken:p,user:h}=v();Object(r.useEffect)(()=>{const e=p();if(!e||!t||s)return;let a=e;e.startsWith("Bearer ")&&(a=e.substring(7));const r=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}/ws/${a}`;console.log("OnlineUsers WebSocket connecting to:",r);const n=new WebSocket(r);return n.onopen=()=>{console.log("WebSocket connected for group:",t),n.send(JSON.stringify({type:"join_group",group_name:t}))},n.onmessage=e=>{const a=JSON.parse(e.data);console.log("WebSocket message received:",a),"online_users_update"===a.type&&a.group_name===t&&c(a.online_users)},n.onclose=()=>{console.log("WebSocket disconnected")},n.onerror=e=>{console.error("WebSocket error:",e)},m(n),()=>{n.readyState===WebSocket.OPEN&&n.send(JSON.stringify({type:"leave_group",group_name:t})),n.close()}},[p,t,s]),Object(r.useEffect)(()=>{if(s&&t){const e=async()=>{try{const e=await E.get("/api/online-users/"+t);c(e.data.online_users||[])}catch(b){console.error("Error loading online users:",b)}};e();const a=setInterval(e,5e3);return()=>clearInterval(a)}},[t,s]);const f=l.map((e,t)=>{const r=e.username===(null===h||void 0===h?void 0:h.username),s=g[e.username];return n.a.createElement(A.b,{key:e.user_id,sx:{background:r?"linear-gradient(135deg, rgba(39, 174, 96, 0.2) 0%, rgba(46, 204, 113, 0.2) 100%)":"linear-gradient(135deg, rgba(44, 62, 80, 0.1) 0%, rgba(44, 62, 80, 0.05) 100%)",borderRadius:"10px",mb:1,display:"flex",alignItems:"center",transition:"all 0.3s ease",border:r?"2px solid #27AE60":"1px solid rgba(44, 62, 80, 0.1)","&:hover":{background:r?"linear-gradient(135deg, rgba(39, 174, 96, 0.3) 0%, rgba(46, 204, 113, 0.3) 100%)":"linear-gradient(135deg, rgba(44, 62, 80, 0.2) 0%, rgba(44, 62, 80, 0.1) 100%)",transform:"translateX(3px)"}}},n.a.createElement(I.a,{sx:{color:"#2C3E50",fontWeight:r?"bold":"normal",fontSize:"1rem"}},r?"\ud83d\udc64":"\ud83d\udfe2"," ",e.username," ",r&&"(Du)"),a&&!r&&n.a.createElement(i.a,{sx:{marginLeft:"auto",background:"sent"===s?"linear-gradient(135deg, #27AE60 0%, #2ECC71 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"8px",fontSize:"0.8rem","&:hover":{transform:"scale(1.05)"}},size:"sm",onClick:()=>(async e=>{if(o){console.log(`Inviting user: ${e} to session: ${o}`),x({...g,[e]:"loading"});try{await E.post("/api/invitation/send",{session_id:o,invitee_username:e}),x({...g,[e]:"sent"}),setTimeout(()=>{x(t=>{const a={...t};return delete a[e],a})},3e3)}catch(b){var t,a;console.error("Error sending invitation:",b),u((null===(t=b.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"Fehler beim Senden der Einladung"),x({...g,[e]:"error"})}}else u("Keine aktive Session. Bitte erstellen Sie zuerst eine Lobby.")})(e.username),disabled:"loading"===s||"sent"===s,loading:"loading"===s},"sent"===s?"\u2705 Eingeladen":"\ud83d\udce8 Einladen"))});return n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #96CEB4 0%, #FCEA2B 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(150, 206, 180, 0.4)",color:"#2C3E50"}},n.a.createElement("h3",{style:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.1)",fontSize:"1.5rem",margin:"1rem 0"}},"\ud83d\udfe2 Online (",l.length,")"),b&&n.a.createElement(O.a,{sx:{mb:2,background:"rgba(255,255,255,0.9)",color:"#C0392B",borderRadius:"10px"},onClose:()=>u("")},b),n.a.createElement(L.b,{sx:{backgroundColor:"rgba(255,255,255,0.7)",height:"100%",borderRadius:"15px",backdropFilter:"blur(10px)"}},n.a.createElement(j.a,{"aria-labelledby":"online-users-list"},f.length>0?f:n.a.createElement(A.b,{sx:{textAlign:"center",fontStyle:"italic",color:"#666",py:2}},n.a.createElement(I.a,null,"Keine Benutzer online \ud83d\udced")))))};var V=function(){const{groupName:e,subject:t}=Object(S.s)(),a=Object(S.q)(),o=t,s=e,[l,d]=Object(r.useState)([]),m=l.length,[g,x]=Object(r.useState)({frage:"",antworten:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!0}]}),[b,u]=Object(r.useState)(!1),[p,h]=Object(r.useState)(!1),[f,v]=Object(r.useState)(""),[F,w]=Object(r.useState)(""),[k,R]=Object(r.useState)(""),[B,D]=Object(r.useState)(!1),[V,Q]=Object(r.useState)(!1),[X,ee]=Object(r.useState)(null),[te,ae]=Object(r.useState)({frage:"",antworten:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!0}]}),[re,ne]=Object(r.useState)(""),[oe,se]=Object(r.useState)(""),[le,ie]=Object(r.useState)(!1);async function ce(){console.log("get Cards Function wurde gecalled"),console.log("Loading cards for:",o,"in group:",s);try{const e=await E.get("/get-subject-cards/",{params:{subjectname:o,gruppenname:s}});if(console.log("API Response:",e.data),e.data&&e.data.content){const t=e.data.content;if(Array.isArray(t)&&0===t.length)console.log("No subject found, setting empty array"),d([]);else if(t.flashcards&&t.flashcards.length>0){const e=t.flashcards;console.log("Setting cards:",e),d(e)}else console.log("No flashcards found, setting empty array"),d([])}else console.log("No content in response"),d([])}catch(e){if(console.error("Error loading cards:",e),e.response&&404===e.response.status)return console.log("Subject not found, redirecting to group page"),void a("/groups/"+s);d([])}}Object(r.useEffect)(()=>{o&&s&&ce()},[o,s]);const de=l.map((e,t)=>n.a.createElement("li",{key:e.question},n.a.createElement(P.a,null,n.a.createElement(G.a,null,n.a.createElement(c.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:{xs:"wrap",sm:"nowrap"},gap:1}},n.a.createElement(W.c,{sx:{fontSize:{xs:"0.9rem",sm:"1rem"},flex:1,pr:1}},e.question),n.a.createElement(c.a,{sx:{display:"flex",gap:{xs:.5,sm:1},flexShrink:0}},n.a.createElement(i.a,{size:"sm",onClick:t=>{t.stopPropagation(),ee(e),ae({frage:e.question,antworten:e.answers.map(e=>({text:e.text,is_correct:e.is_correct}))}),ne(""),D(!0)},sx:{background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"8px",fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},"&:hover":{background:"linear-gradient(135deg, #44A08D 0%, #3d8f7a 100%)"}}},"\u270f\ufe0f ",n.a.createElement(c.a,{component:"span",sx:{display:{xs:"none",sm:"inline"}}},"Bearbeiten")),n.a.createElement(i.a,{size:"sm",onClick:t=>{t.stopPropagation(),ee(e),se(""),Q(!0)},sx:{background:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"8px",fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},"&:hover":{background:"linear-gradient(135deg, #C0392B 0%, #A93226 100())"}}},"\ud83d\uddd1\ufe0f ",n.a.createElement(c.a,{component:"span",sx:{display:{xs:"none",sm:"inline"}}},"L\xf6schen"))))),n.a.createElement(T.a,null,n.a.createElement(j.a,null,e.answers.map((e,t)=>n.a.createElement(A.b,{key:t},n.a.createElement(I.a,null,e.is_correct?"\u2705":"\u274c"),n.a.createElement(W.c,{sx:{fontSize:{xs:"0.9rem",sm:"1rem"}}},e.text))))))));return n.a.createElement(c.a,{className:"parent",sx:{p:{xs:2,sm:3,md:4}}},n.a.createElement(N.a,{container:!0,spacing:{xs:2,sm:3},sx:{maxWidth:{lg:"1200px"},mx:"auto"}},n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{mb:2,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(102, 126, 234, 0.4)",color:"#FFF",textAlign:"center",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h1",sx:{fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"},fontWeight:"bold",textShadow:"0 3px 6px rgba(0,0,0,0.3)",mb:1}},"\ud83d\udcd6 Fach: ",o),n.a.createElement(W.c,{level:"h4",sx:{fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",background:"rgba(255,255,255,0.15)",borderRadius:"12px",p:1,display:"inline-block",fontSize:{xs:"1rem",sm:"1.25rem"}}},"\ud83c\udfc6 Gruppe: ",s))),n.a.createElement(N.a,{xs:12,md:6},n.a.createElement(L.b,{sx:{display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(78, 205, 196, 0.4)",minHeight:{xs:"150px",sm:"200px"},position:"relative",overflow:"hidden",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 20px 40px rgba(78, 205, 196, 0.6)"}}},n.a.createElement($.a,{sx:{overflow:"hidden"}},n.a.createElement(i.a,{onClick:async function(){ie(!0);try{const e=(await E.post("/api/lobby/create",{subject_name:o,group_name:s})).data.session.id;a("/lobby/"+e)}catch(r){var e,t;console.error("Error creating lobby:",r),alert("Fehler beim Erstellen der Lobby: "+((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Unbekannter Fehler"))}finally{ie(!1)}},disabled:le,sx:{width:"100%",height:"100%",p:0,border:"none",borderRadius:0,background:"transparent","&:hover":{background:"rgba(78, 205, 196, 0.3)"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},n.a.createElement(c.a,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(135deg, rgba(78, 205, 196, 0.8) 0%, rgba(68, 160, 141, 0.8) 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#FFF"}},n.a.createElement(W.c,{level:"h1",sx:{fontSize:{xs:"3rem",sm:"4rem"},fontWeight:"bold",textShadow:"0 4px 8px rgba(0,0,0,0.3)",mb:2}},"\ud83d\ude80"),n.a.createElement(W.c,{level:"h2",sx:{fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",textAlign:"center",fontSize:{xs:"1.25rem",sm:"1.5rem",md:"1.75rem"}}},le?"Lobby wird erstellt...":"Quiz-Lobby starten"),n.a.createElement(W.c,{level:"body1",sx:{mt:1,textAlign:"center",opacity:.9,fontSize:{xs:"0.875rem",sm:"1rem"},px:2}},"Klicken Sie hier, um eine neue Spielrunde zu beginnen!")))))),n.a.createElement(N.a,{xs:12,md:6},n.a.createElement(J,{groupName:s,showInviteButtons:!1})),n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(240, 147, 251, 0.4)",color:"#FFF",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h2",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem"},mb:2}},"\ud83d\udcdd Alle Fragen (",m,")"),n.a.createElement(j.a,{sx:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",p:{xs:1,sm:2},backdropFilter:"blur(10px)"}},0===l.length?n.a.createElement(A.b,{sx:{textAlign:"center",fontStyle:"italic",color:"rgba(255,255,255,0.8)",py:3}},"Noch keine Fragen vorhanden \ud83e\udd14"):de,n.a.createElement(P.a,{sx:{background:"rgba(255,255,255,0.15)",borderRadius:"15px",border:"none",backdropFilter:"blur(10px)",mt:2}},n.a.createElement(G.a,{sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},"&:hover":{background:"rgba(255,255,255,0.1)"}}},"\u2795 Frage hinzuf\xfcgen"),n.a.createElement(T.a,{sx:{background:"rgba(255,255,255,0.05)",borderRadius:"0 0 15px 15px"}},n.a.createElement(M.a,{sx:{mb:2}},n.a.createElement(H.a,{sx:{fontSize:{xs:"0.9rem",sm:"1rem"}}},"Frage"),n.a.createElement(q.a,{placeholder:"Geben Sie hier die Frage ein",value:g.frage,onChange:e=>{x({...g,frage:e.target.value})},sx:{fontSize:{xs:"0.9rem",sm:"1rem"}}})),n.a.createElement(W.c,{level:"body-sm",sx:{mb:1}},"Geben Sie 4 Antworten ein und markieren Sie die richtige:"),n.a.createElement(K.a,{value:g.antworten.findIndex(e=>e.is_correct).toString(),onChange:e=>{const t=parseInt(e.target.value),a=g.antworten.map((e,a)=>({...e,is_correct:a===t}));x({...g,antworten:a})}},g.antworten.map((e,t)=>n.a.createElement(U.a,{key:t,sx:{p:{xs:.75,sm:1},mb:1,borderRadius:"sm",border:"1px solid",borderColor:e.is_correct?"success.outlinedBorder":"neutral.outlinedBorder",display:"flex",alignItems:"center",gap:1}},n.a.createElement(Y.a,{value:t.toString(),size:"sm"}),n.a.createElement(q.a,{placeholder:"Antwort "+(t+1),value:e.text,onChange:e=>{const a=[...g.antworten];a[t].text=e.target.value,x({...g,antworten:a})},sx:{flex:1,fontSize:{xs:"0.875rem",sm:"1rem"}},variant:e.is_correct?"soft":"outlined",color:e.is_correct?"success":"neutral"})))),n.a.createElement(i.a,{onClick:async function(){if(console.log("Karte wird gleich erstellt!"),!g.frage.trim())return void alert("Bitte geben Sie eine Frage ein");if(4===g.antworten.filter(e=>e.text.trim()).length)try{const a=await E.post("/flashcard/create",{fach:t,gruppe:e,frage:g.frage,antworten:g.antworten});console.log(a.data),x({frage:"",antworten:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!0}]}),ce()}catch(n){var a,r;console.error("Error creating flashcard:",n),alert((null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.detail)||"Fehler beim Erstellen der Karteikarte")}else alert("Bitte f\xfcllen Sie alle 4 Antwortfelder aus")},fullWidth:!0,sx:{mt:2,background:"linear-gradient(135deg, #27AE60 0%, #2ECC71 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",fontSize:{xs:"1rem",sm:"1.1rem"},"&:hover":{background:"linear-gradient(135deg, #229954 0%, #27AE60 100%)"}}},"\ud83d\udcbe Karteikarte speichern")))))),n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #2C3E50 0%, #34495E 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(44, 62, 80, 0.4)",color:"#FFF",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h3",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.25rem",sm:"1.5rem"},mb:2}},"\u2699\ufe0f Fach-Verwaltung"),n.a.createElement(c.a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:"10px",sm:"12px"},justifyContent:"center"}},n.a.createElement(i.a,{onClick:()=>{v(o),w(""),u(!0)},sx:{background:"linear-gradient(135deg, #F39C12 0%, #E67E22 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",fontSize:{xs:"0.9rem",sm:"1rem"},px:{xs:2,sm:3},"&:hover":{background:"linear-gradient(135deg, #E67E22 0%, #D68910 100%)"}}},"\u270f\ufe0f Fach umbenennen"),n.a.createElement(i.a,{onClick:()=>{R(""),h(!0)},sx:{background:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",fontSize:{xs:"0.9rem",sm:"1rem"},px:{xs:2,sm:3},"&:hover":{background:"linear-gradient(135deg, #C0392B 0%, #A93226 100())"}}},"\ud83d\uddd1\ufe0f Fach l\xf6schen"))))),n.a.createElement(y.c,{open:b,onClose:()=>u(!1)},n.a.createElement(C.a,{sx:{width:{xs:"90%",sm:"400px"},maxWidth:"400px"}},n.a.createElement(_.a,null,"Fach umbenennen"),n.a.createElement(z.a,null,F&&n.a.createElement(O.a,{color:"danger",sx:{mb:2}},F),n.a.createElement(M.a,null,n.a.createElement(H.a,null,"Neuer Fachname"),n.a.createElement(q.a,{placeholder:"Neuen Namen eingeben",value:f,onChange:e=>{v(e.target.value),F&&w("")}}))),n.a.createElement(Z.a,null,n.a.createElement(i.a,{variant:"outlined",onClick:()=>u(!1)},"Abbrechen"),n.a.createElement(i.a,{color:"primary",onClick:async function(){if(console.log(`Fach umbenennen: ${o} -> ${f}`),w(""),f.trim())if(f.trim()!==o)try{const e=await E.put("/fach-umbenennen",{old_fach_name:o,new_fach_name:f.trim(),gruppen_name:s});console.log("Rename response:",e.data),u(!1),a(`/groups/${s}/${f.trim()}`)}catch(r){var e,t;console.error("Error renaming subject:",r);const a=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Fehler beim Umbenennen des Fachs";w(a)}else w("Der neue Name muss sich vom aktuellen Namen unterscheiden");else w("Bitte geben Sie einen neuen Fachnamen ein")}},"Umbenennen")))),n.a.createElement(y.c,{open:p,onClose:()=>h(!1)},n.a.createElement(C.a,{sx:{width:{xs:"90%",sm:"400px"},maxWidth:"400px"}},n.a.createElement(_.a,null,"Fach l\xf6schen"),n.a.createElement(z.a,null,k&&n.a.createElement(O.a,{color:"danger",sx:{mb:2}},k),n.a.createElement(W.c,null,'Sind Sie sicher, dass Sie das Fach "',n.a.createElement("strong",null,o),'" l\xf6schen m\xf6chten?'),n.a.createElement(W.c,{level:"body-sm",sx:{mt:1}},"Alle Karteikarten in diesem Fach werden ebenfalls gel\xf6scht. Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden.")),n.a.createElement(Z.a,null,n.a.createElement(i.a,{variant:"outlined",onClick:()=>h(!1)},"Abbrechen"),n.a.createElement(i.a,{id:"fachLoeschenButton",color:"danger",onClick:async function(){console.log("Fach l\xf6schen: "+o),R("");try{const e=await E.delete("/fach-loeschen",{data:{fach_name:o,gruppen_name:s}});console.log("Delete response:",e.data),h(!1),a("/groups/"+s)}catch(r){var e,t;console.error("Error deleting subject:",r);const a=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Fehler beim L\xf6schen des Fachs";R(a)}}},"L\xf6schen")))),n.a.createElement(y.c,{open:B,onClose:()=>D(!1)},n.a.createElement(C.a,{sx:{width:{xs:"95%",sm:"90%",md:"600px"},maxWidth:"600px"}},n.a.createElement(_.a,null,"Karteikarte bearbeiten"),n.a.createElement(z.a,null,re&&n.a.createElement(O.a,{color:"danger",sx:{mb:2}},re),n.a.createElement(M.a,{sx:{mb:2}},n.a.createElement(H.a,null,"Frage"),n.a.createElement(q.a,{placeholder:"Geben Sie hier die Frage ein",value:te.frage,onChange:e=>{ae({...te,frage:e.target.value}),re&&ne("")}})),n.a.createElement(W.c,{level:"body-sm",sx:{mb:1}},"Bearbeiten Sie die Antworten und markieren Sie die richtige:"),n.a.createElement(K.a,{value:te.antworten.findIndex(e=>e.is_correct).toString(),onChange:e=>{const t=parseInt(e.target.value),a=te.antworten.map((e,a)=>({...e,is_correct:a===t}));ae({...te,antworten:a})}},te.antworten.map((e,t)=>n.a.createElement(U.a,{key:t,sx:{p:1,mb:1,borderRadius:"sm",border:"1px solid",borderColor:e.is_correct?"success.outlinedBorder":"neutral.outlinedBorder",display:"flex",alignItems:"center",gap:1}},n.a.createElement(Y.a,{value:t.toString(),size:"sm"}),n.a.createElement(q.a,{placeholder:"Antwort "+(t+1),value:e.text,onChange:e=>{const a=[...te.antworten];a[t].text=e.target.value,ae({...te,antworten:a}),re&&ne("")},sx:{flex:1},variant:e.is_correct?"soft":"outlined",color:e.is_correct?"success":"neutral"}))))),n.a.createElement(Z.a,null,n.a.createElement(i.a,{variant:"outlined",onClick:()=>D(!1)},"Abbrechen"),n.a.createElement(i.a,{color:"primary",onClick:async function(){if(console.log("Karteikarte bearbeiten:",X),ne(""),!te.frage.trim())return void ne("Bitte geben Sie eine Frage ein");if(4===te.antworten.filter(e=>e.text.trim()).length)try{const e=await E.put("/flashcard/update",{flashcard_id:X.flashcard_id,frage:te.frage,antworten:te.antworten});console.log("Update response:",e.data),D(!1),ce()}catch(a){var e,t;console.error("Error updating flashcard:",a);const r=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Fehler beim Bearbeiten der Karteikarte";ne(r)}else ne("Bitte f\xfcllen Sie alle 4 Antwortfelder aus")}},"Speichern")))),n.a.createElement(y.c,{open:V,onClose:()=>Q(!1)},n.a.createElement(C.a,{sx:{width:{xs:"90%",sm:"400px"},maxWidth:"400px"}},n.a.createElement(_.a,null,"Karteikarte l\xf6schen"),n.a.createElement(z.a,null,oe&&n.a.createElement(O.a,{color:"danger",sx:{mb:2}},oe),n.a.createElement(W.c,null,"Sind Sie sicher, dass Sie diese Karteikarte l\xf6schen m\xf6chten?"),X&&n.a.createElement(W.c,{level:"body-sm",sx:{mt:1,fontStyle:"italic"}},'Frage: "',X.question,'"'),n.a.createElement(W.c,{level:"body-sm",sx:{mt:1}},"Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden.")),n.a.createElement(Z.a,null,n.a.createElement(i.a,{variant:"outlined",onClick:()=>Q(!1)},"Abbrechen"),n.a.createElement(i.a,{color:"danger",onClick:async function(){console.log("Karteikarte l\xf6schen:",X),se("");try{const e=await E.delete("/flashcard/delete",{data:{flashcard_id:X.flashcard_id}});console.log("Delete flashcard response:",e.data),Q(!1),ce()}catch(a){var e,t;console.error("Error deleting flashcard:",a);const r=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Fehler beim L\xf6schen der Karteikarte";se(r)}}},"L\xf6schen")))))};var Q=function(){return n.a.createElement("footer",null,n.a.createElement("p",null," \xa9 2025 TeamQuiz"))};var X=function(){const[e,t]=Object(r.useState)([]),[a,o]=Object(r.useState)([]),[s,d]=Object(r.useState)(""),[m,g]=Object(r.useState)(""),[x,b]=Object(r.useState)(""),[u,p]=Object(r.useState)(""),{groupName:h}=Object(S.s)(),f=Object(S.q)();async function v(){try{console.log("Loading data for group: "+h);const e=await E.get("/get-specific-group/",{params:{name:h}});console.log("Group data response:",e.data);const a=e.data.content.users,r=e.data.content.subjects;console.log(`Found ${a.length} members:`,a),console.log(`Found ${r.length} subjects:`,r),t(r),o(a)}catch(e){console.error("Error loading group data:",e)}}Object(r.useEffect)(()=>{h&&v()},[h]);const F=e.map((e,t)=>n.a.createElement(A.b,{key:t,sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%)",borderRadius:"12px",mb:1,cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.15) 100%)",transform:"translateX(5px)",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"}}},n.a.createElement(l.a,{component:w.b,to:`/groups/${encodeURIComponent(h)}/${encodeURIComponent(e)}`,sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textDecoration:"none",width:"100%","&:hover":{textDecoration:"none"}}},"\ud83d\udcd6 ",e))),k=a.map((e,t)=>n.a.createElement(A.b,{key:t,sx:{background:"rgba(255,255,255,0.1)",borderRadius:"10px",mb:.5,padding:{xs:"8px",sm:"12px"}}},n.a.createElement(I.a,null,n.a.createElement("span",{role:"img","aria-label":"fire"},"\ud83d\udd25")),n.a.createElement(W.c,{sx:{color:"#2C3E50",fontSize:{xs:"0.9rem",sm:"1rem"}}},e)));return n.a.createElement(c.a,{className:"parent",sx:{p:{xs:2,sm:3,md:4}}},n.a.createElement(W.c,{level:"h1",sx:{textAlign:"center",fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"},fontWeight:"bold",color:"#FFF",textShadow:"0 3px 6px rgba(0,0,0,0.5)",mb:{xs:2,sm:3}}},"\ud83c\udfc6 ",h," \ud83c\udfc6"),n.a.createElement(N.a,{container:!0,spacing:{xs:2,sm:3},sx:{maxWidth:{lg:"1200px"},mx:"auto"}},n.a.createElement(N.a,{xs:12,lg:8},n.a.createElement(c.a,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,sm:3}}},n.a.createElement(L.b,{sx:{height:"auto",background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(78, 205, 196, 0.4)",color:"#FFF",position:"relative",p:{xs:2,sm:3}}},n.a.createElement(c.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexDirection:{xs:"column",md:"row"},gap:2}},n.a.createElement(c.a,{sx:{flex:1,width:"100%"}},n.a.createElement(W.c,{level:"h2",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem"},mb:2}},"\ud83d\udcda Alle F\xe4cher von ",h),n.a.createElement(j.a,{"aria-labelledby":"decorated-list-demo",sx:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",p:2,backdropFilter:"blur(10px)"}},0===F.length?n.a.createElement(A.b,{sx:{textAlign:"center",fontStyle:"italic",color:"rgba(255,255,255,0.8)",py:3,background:"rgba(255,255,255,0.05)",borderRadius:"10px"}},"\ud83d\udced Noch keine F\xe4cher vorhanden - f\xfcgen Sie das erste hinzu!"):F)),n.a.createElement(c.a,{sx:{width:{xs:"100%",md:"250px"},flexShrink:0}},n.a.createElement(P.a,{sx:{background:"rgba(255,255,255,0.15)",borderRadius:"20px",border:"none",backdropFilter:"blur(15px)",boxShadow:"0 8px 25px rgba(0,0,0,0.1)"}},n.a.createElement(G.a,{sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textAlign:"center","&:hover":{background:"rgba(255,255,255,0.1)"}}},"\u2795 Fach hinzuf\xfcgen"),n.a.createElement(T.a,{sx:{background:"rgba(255,255,255,0.1)",borderRadius:"0 0 20px 20px",p:2}},m&&n.a.createElement(O.a,{sx:{mb:2,background:"rgba(255,255,255,0.95)",color:"#C0392B",borderRadius:"12px",border:"none"}},m),n.a.createElement(q.a,{placeholder:"Neuen Fach-Namen eingeben...",value:s,onChange:e=>{d(e.target.value),m&&g("")},sx:{background:"rgba(255,255,255,0.95)",borderRadius:"12px",border:"none",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"}}}),n.a.createElement(i.a,{onClick:async function(){if(console.log(`Fach ${s} wird gleich erstellt!`),g(""),s.trim())try{const e=await E.post("/fach-erstellen",{fach_name:s.trim(),gruppen_name:h});console.log(e.data),v(),d(""),g("")}catch(a){var e,t;console.error("Error creating subject:",a);const r=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Fehler beim Erstellen des Fachs";g(r)}else g("Bitte geben Sie einen Fachnamen ein")},fullWidth:!0,sx:{background:"linear-gradient(135deg, #27AE60 0%, #2ECC71 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",fontSize:{xs:"0.9rem",sm:"1rem"},boxShadow:"0 4px 15px rgba(39, 174, 96, 0.3)","&:hover":{background:"linear-gradient(135deg, #229954 0%, #27AE60 100%)",transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(39, 174, 96, 0.4)"}}},"\ud83d\udcbe Speichern")))))),n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #2C3E50 0%, #34495E 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(44, 62, 80, 0.4)",color:"#FFF",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h3",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.25rem",sm:"1.5rem"},mb:2}},"\u2699\ufe0f Gruppenaktionen"),n.a.createElement(c.a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:"10px",sm:"12px"},justifyContent:"center"}},n.a.createElement(i.a,{onClick:async function(){console.log("Gruppe wird verlassen.");try{const e=await E.delete("/leave-group",{data:{gruppen_name:h}});console.log(e.data),f("/groups")}catch(e){console.error("Error leaving group:",e)}},sx:{background:"linear-gradient(135deg, #F39C12 0%, #E67E22 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"10px",fontSize:{xs:"0.9rem",sm:"1rem"},padding:{xs:"10px 20px",sm:"12px 30px"},"&:hover":{background:"linear-gradient(135deg, #E67E22 0%, #D68910 100())"}}},"\ud83d\udeaa Austreten"),n.a.createElement(i.a,{onClick:async function(){console.log("Gruppe wird gleich gel\xf6scht!");try{const e=await E.delete("/delete-group",{data:{gruppen_name:h}});console.log(e.data),f("/groups")}catch(e){console.error("Error deleting group:",e)}},sx:{background:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"10px",fontSize:{xs:"0.9rem",sm:"1rem"},padding:{xs:"10px 20px",sm:"12px 30px"},"&:hover":{background:"linear-gradient(135deg, #C0392B 0%, #A93226 100())"}}},"\ud83d\uddd1\ufe0f Gruppe L\xf6schen"))))),n.a.createElement(N.a,{xs:12,lg:4},n.a.createElement(c.a,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,sm:3}}},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #96CEB4 0%, #FCEA2B 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(150, 206, 180, 0.4)",color:"#2C3E50",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h3",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.1)",fontSize:{xs:"1.25rem",sm:"1.5rem"},mb:2}},"\ud83d\udc65 Gruppenmitglieder"),n.a.createElement(j.a,{"aria-labelledby":"decorated-list-demo",sx:{background:"rgba(255,255,255,0.7)",borderRadius:"15px",p:1,backdropFilter:"blur(10px)"}},k)),n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(102, 126, 234, 0.4)",color:"#FFF",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h3",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.25rem",sm:"1.5rem"},mb:2}},"\ud83d\udce8 Person zur Gruppe einladen"),n.a.createElement(c.a,{sx:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",padding:"1rem",backdropFilter:"blur(10px)"}},u&&n.a.createElement(O.a,{sx:{mb:2,background:"rgba(255,255,255,0.9)",color:"#C0392B",borderRadius:"10px"}},u),n.a.createElement(q.a,{placeholder:"Benutzername eingeben...",value:x,onChange:e=>{b(e.target.value),u&&p("")},sx:{background:"rgba(255,255,255,0.9)",borderRadius:"10px",border:"none",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"}}}),n.a.createElement(i.a,{onClick:async function(){if(console.log(`Einladung wird an ${x} gesendet`),p(""),x.trim())try{const e=await E.post("/send-invitation",{gruppen_name:h,username:x.trim()});console.log(e.data),b(""),p("")}catch(a){var e,t;console.error("Error sending invitation:",a);const r=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Fehler beim Senden der Einladung";p(r)}else p("Bitte geben Sie einen Benutzernamen ein")},fullWidth:!0,sx:{background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"10px",fontSize:{xs:"1rem",sm:"1.1rem"},"&:hover":{background:"linear-gradient(135deg, #44A08D 0%, #3d8f7a 100())"}}},"\u2709\ufe0f Einladen")))))))};var ee=function(){const{user:e}=v(),[t,a]=Object(r.useState)([]),[o,s]=Object(r.useState)([]),[d,m]=Object(r.useState)("");async function g(){try{const e=(await E.get("/get-gruppeninfo")).data.content.groups.map(e=>e.name);console.log(e),a(e)}catch(e){console.error("Error loading groups:",e)}}async function x(){try{const e=(await E.get("/get-invitations")).data.content;console.log(e),s(e)}catch(e){console.error("Error loading invitations:",e)}}Object(r.useEffect)(()=>{g()},[]),Object(r.useEffect)(()=>{x()},[]);const b=t.map(e=>n.a.createElement(A.b,{key:e,sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%)",borderRadius:"12px",mb:1,cursor:"pointer",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.15) 100%)",transform:"translateX(5px)",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"}}},n.a.createElement(l.a,{component:w.b,to:"/groups/"+encodeURIComponent(e),sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textDecoration:"none","&:hover":{textDecoration:"none"}}},"\ud83c\udfaf ",e))),u=o.map((e,t)=>n.a.createElement(A.b,{key:t,sx:{background:"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%)",borderRadius:"12px",mb:1,p:{xs:1.5,sm:2},transition:"all 0.3s ease","&:hover":{background:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.15) 100%)",transform:"translateY(-2px)",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"}}},n.a.createElement(I.a,{sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"0.9rem",sm:"1rem"},flexWrap:"wrap"}},"\ud83c\udf89 ",e.From," l\xe4dt dich in die Gruppe ",e.To," ein!"),n.a.createElement(c.a,{sx:{marginLeft:"auto",display:"flex",gap:{xs:"8px",sm:"10px"},flexWrap:{xs:"wrap",sm:"nowrap"},justifyContent:{xs:"center",sm:"flex-end"},width:{xs:"100%",sm:"auto"},mt:{xs:1,sm:0}}},n.a.createElement(i.a,{onClick:()=>async function(e){console.log(`Einladung ${e} wird angenommen`);try{const t=await E.post("/accept-invitation",{invitation_id:e});console.log(t.data),g(),x()}catch(t){console.error("Error accepting invitation:",t)}}(e.id),size:"sm",sx:{background:"linear-gradient(135deg, #27AE60 0%, #2ECC71 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"10px",fontSize:{xs:"0.875rem",sm:"1rem"},px:{xs:2,sm:3},"&:hover":{background:"linear-gradient(135deg, #229954 0%, #27AE60 100%)"}}},"\u2705 Annehmen"),n.a.createElement(i.a,{onClick:()=>async function(e){console.log(`Einladung ${e} wird abgelehnt`);try{const t=await E.post("/reject-invitation",{invitation_id:e});console.log(t.data),x()}catch(t){console.error("Error rejecting invitation:",t)}}(e.id),size:"sm",sx:{background:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"10px",fontSize:{xs:"0.875rem",sm:"1rem"},px:{xs:2,sm:3},"&:hover":{background:"linear-gradient(135deg, #C0392B 0%, #A93226 100%)"}}},"\u274c Ablehnen"))));return n.a.createElement(c.a,{className:"parent",sx:{p:{xs:2,sm:3,md:4}}},n.a.createElement(W.c,{level:"h1",sx:{textAlign:"center",fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"},fontWeight:"bold",color:"#FFF",textShadow:"0 3px 6px rgba(0,0,0,0.5)",mb:{xs:2,sm:3,md:4}}},"\ud83c\udfe0 Willkommen, ",(null===e||void 0===e?void 0:e.username)||"Benutzer","! \ud83c\udfe0"),n.a.createElement(N.a,{container:!0,spacing:{xs:2,sm:3},sx:{maxWidth:{lg:"1200px"},mx:"auto"}},n.a.createElement(N.a,{xs:12,md:6},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(78, 205, 196, 0.4)",color:"#FFF",height:"100%"}},n.a.createElement(W.c,{level:"h2",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem"},margin:"1rem 0"}},"\ud83d\udcda Meine Gruppen"),n.a.createElement(j.a,{"aria-labelledby":"decorated-list-demo",sx:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",p:1,backdropFilter:"blur(10px)"}},b))),n.a.createElement(N.a,{xs:12,md:6},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(102, 126, 234, 0.4)",color:"#FFF",height:"100%"}},n.a.createElement(W.c,{level:"h3",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.25rem",sm:"1.5rem"},margin:"1rem 0"}},"\u2795 Neue Gruppe erstellen"),n.a.createElement(c.a,{sx:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",p:2,backdropFilter:"blur(10px)"}},n.a.createElement(q.a,{placeholder:"Gruppenname eingeben...",value:d,onChange:e=>{m(e.target.value)},sx:{background:"rgba(255,255,255,0.9)",borderRadius:"12px",border:"none",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"}}}),n.a.createElement(i.a,{onClick:async function(){console.log(`Gruppe ${d} wird gleich erstellt!`);try{const e=await E.post("/gruppe-erstellen",{gruppen_name:d});console.log(e.data),g()}catch(e){console.error("Error creating group:",e)}},fullWidth:!0,sx:{background:"linear-gradient(135deg, #27AE60 0%, #2ECC71 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",fontSize:{xs:"1rem",sm:"1.1rem"},boxShadow:"0 6px 20px rgba(39, 174, 96, 0.4)","&:hover":{background:"linear-gradient(135deg, #229954 0%, #27AE60 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(39, 174, 96, 0.5)"}}},"\ud83d\ude80 Erstellen!")))),n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(240, 147, 251, 0.4)",color:"#FFF"}},n.a.createElement(W.c,{level:"h2",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem"},margin:"1rem 0"}},"\ud83d\udce8 Einladungen"),n.a.createElement(j.a,{"aria-labelledby":"decorated-list-demo",sx:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",p:1,backdropFilter:"blur(10px)"}},0===u.length?n.a.createElement(A.b,{sx:{textAlign:"center",fontStyle:"italic",color:"rgba(255,255,255,0.8)",py:3}},"Keine Einladungen vorhanden \ud83d\udced"):u)))))};var te=function(){var e,t;const{sessionId:a}=Object(S.s)(),o=Object(S.q)(),[s,l]=Object(r.useState)(null),[d,m]=Object(r.useState)([]),[g,x]=Object(r.useState)(!0),[b,u]=Object(r.useState)(""),{user:p}=v(),[h,f]=Object(r.useState)(""),[F,w]=Object(r.useState)(""),[k,y]=Object(r.useState)("");Object(r.useEffect)(()=>{a?C():(u("Session ID fehlt in der URL"),x(!1))},[a]),Object(r.useEffect)(()=>{const e=()=>{s&&navigator.sendBeacon(`/api/lobby/${a}/leave`,JSON.stringify({}))};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e),s&&E.post(`/api/lobby/${a}/leave`).catch(()=>{})}},[s]);const C=async()=>{try{const e=await E.get("/api/lobby/"+a);l(e.data);const t=await E.get(`/api/lobby/${a}/participants`);m(t.data.participants),x(!1)}catch(b){console.error("Error loading session:",b),u("Session nicht gefunden"),x(!1)}};Object(r.useEffect)(()=>{if(!s)return;const e=async()=>{try{const e=await E.get(`/api/lobby/${a}/participants`);m(e.data.participants);const t=await E.get("/api/lobby/"+a);console.log(`[LOBBY POLL] User: ${null===p||void 0===p?void 0:p.username}, Session: ${a}, Status: ${t.data.status}`),"playing"===t.data.status?(console.log(`[LOBBY REDIRECT] ${null===p||void 0===p?void 0:p.username} is being redirected to game!`),o("/game/"+a)):"in_progress"===t.data.status&&(console.log(`[LOBBY REDIRECT] ${null===p||void 0===p?void 0:p.username} is being redirected to game (in_progress)!`),o("/game/"+a))}catch(b){console.error("Error fetching updates:",b)}};e();const t=setInterval(e,1500);return()=>clearInterval(t)},[s,o,a]);const _=async()=>{if(h.trim()){w(""),y("");try{await E.post("/api/invitation/send",{session_id:a,invitee_username:h}),y(`Einladung an ${h} gesendet!`),f(""),setTimeout(()=>y(""),3e3)}catch(b){var e,t;(null===(e=b.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)?w(b.response.data.detail):w("Fehler beim Senden der Einladung")}}else w("Bitte geben Sie einen Benutzernamen ein")};return g?n.a.createElement(c.a,{className:"parent",sx:{p:{xs:2,sm:3,md:4}}},n.a.createElement(c.a,{sx:{maxWidth:"600px",mx:"auto"}},n.a.createElement(L.b,null,n.a.createElement(W.c,null,"Lade Session...")))):n.a.createElement(c.a,{className:"parent",sx:{p:{xs:2,sm:3,md:4}}},n.a.createElement(N.a,{container:!0,spacing:{xs:2,sm:3},sx:{maxWidth:{lg:"1200px"},mx:"auto"}},b&&n.a.createElement(N.a,{xs:12},n.a.createElement(O.a,{color:"danger",sx:{mb:2}},b)),n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"25px",boxShadow:"0 15px 35px rgba(102, 126, 234, 0.4)",color:"#FFF",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h1",sx:{textAlign:"center",fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"},fontWeight:"bold",textShadow:"0 3px 6px rgba(0,0,0,0.3)",mb:1}},"\ud83c\udfae Lobby \ud83c\udfae"),n.a.createElement(W.c,{level:"h4",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",background:"rgba(255,255,255,0.15)",borderRadius:"12px",p:2,mb:2,fontSize:{xs:"1rem",sm:"1.25rem"}}},"\ud83d\udcda ",null===s||void 0===s||null===(e=s.group)||void 0===e?void 0:e.name," | \ud83d\udcd6 ",null===s||void 0===s||null===(t=s.subject)||void 0===t?void 0:t.name),s&&n.a.createElement(n.a.Fragment,null,n.a.createElement(W.c,{level:"body1",sx:{textAlign:"center",opacity:.9,fontStyle:"italic",fontSize:{xs:"0.9rem",sm:"1rem"}}})))),s&&s.host.username===(null===p||void 0===p?void 0:p.username)&&n.a.createElement(N.a,{xs:12,md:6},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(78, 205, 196, 0.3)",color:"#FFF",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h3",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.25rem",sm:"1.5rem"},mb:2}},"\ud83d\udce8 Spieler einladen"),F&&n.a.createElement(O.a,{color:"danger",sx:{mb:2}},F),k&&n.a.createElement(O.a,{color:"success",sx:{mb:2}},k),n.a.createElement(c.a,{sx:{display:"flex",gap:{xs:1,sm:2},alignItems:"flex-end",flexDirection:{xs:"column",sm:"row"}}},n.a.createElement(M.a,{sx:{flex:1,width:{xs:"100%",sm:"auto"}}},n.a.createElement(H.a,{sx:{fontSize:{xs:"0.9rem",sm:"1rem"}}},"Benutzername"),n.a.createElement(q.a,{placeholder:"Benutzername eingeben",value:h,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"===e.key&&_()},sx:{fontSize:{xs:"0.9rem",sm:"1rem"}}})),n.a.createElement(i.a,{onClick:_,disabled:!h.trim(),sx:{background:"linear-gradient(135deg, #FF6B6B 0%, #FF5252 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"10px",fontSize:{xs:"0.9rem",sm:"1rem"},px:{xs:2,sm:3},width:{xs:"100%",sm:"auto"},"&:hover":{background:"linear-gradient(135deg, #FF5252 0%, #F44336 100%)"}}},"\u2709\ufe0f Einladen")))),n.a.createElement(N.a,{xs:12,md:s&&s.host.username===(null===p||void 0===p?void 0:p.username)?6:12},n.a.createElement(L.b,{sx:{background:"linear-gradient(135deg, #96CEB4 0%, #FCEA2B 100%)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(150, 206, 180, 0.3)",color:"#2C3E50",p:{xs:2,sm:3},height:"100%"}},n.a.createElement(W.c,{level:"h2",sx:{textAlign:"center",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.1)",fontSize:{xs:"1.5rem",sm:"1.75rem"},mb:2}},"\ud83d\udc65 Beigetreten (",d.length,")"),n.a.createElement(L.b,{sx:{backgroundColor:"rgba(255,255,255,0.9)",height:"100%",borderRadius:"15px",backdropFilter:"blur(10px)"}},n.a.createElement(j.a,null,d.length>0?d.map(e=>n.a.createElement(A.b,{key:e.user_id,sx:{background:e.is_host?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #E8F5E8 0%, #F0F8FF 100%)",borderRadius:"12px",mb:1,padding:{xs:"10px 12px",sm:"12px 16px"},boxShadow:"0 3px 10px rgba(0,0,0,0.1)",border:e.is_host?"2px solid #FF8C00":"1px solid #E0E0E0"}},n.a.createElement(c.a,{sx:{fontSize:{xs:"1rem",sm:"1.2rem"},marginRight:"12px"}},e.is_host?"\ud83d\udc51":"\ud83d\udc64"),n.a.createElement(I.a,{sx:{fontSize:{xs:"1rem",sm:"1.1rem"},fontWeight:e.is_host?"bold":"normal",color:e.is_host?"#B8860B":"#2C3E50"}},e.username,e.is_host&&" (Host)"))):n.a.createElement(A.b,{sx:{background:"linear-gradient(135deg, #F0F0F0 0%, #E0E0E0 100%)",borderRadius:"12px",padding:"20px",textAlign:"center",fontStyle:"italic"}},n.a.createElement(I.a,{sx:{fontSize:{xs:"1rem",sm:"1.1rem"},color:"#666"}},"\u23f3 Warte auf Teilnehmer...")))),n.a.createElement(c.a,{sx:{display:"flex",gap:{xs:1,sm:2},marginTop:"16px",flexDirection:{xs:"column",sm:"row"}}},s&&s.host.username===(null===p||void 0===p?void 0:p.username)?n.a.createElement(i.a,{size:"lg",onClick:async()=>{if(s&&s.host.username===(null===p||void 0===p?void 0:p.username))try{await E.post(`/api/lobby/${a}/start`)}catch(b){console.error("Error starting quiz:",b),u("Fehler beim Starten der Runde")}},fullWidth:!0,disabled:d.length<1,sx:{background:"linear-gradient(135deg, #27AE60 0%, #2ECC71 100%)",color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.2rem"},borderRadius:"15px",boxShadow:"0 6px 20px rgba(39, 174, 96, 0.4)","&:hover":{background:"linear-gradient(135deg, #229954 0%, #27AE60 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(39, 174, 96, 0.5)"},"&:disabled":{background:"rgba(150, 150, 150, 0.5)",color:"rgba(255,255,255,0.7)"}}},"\ud83d\ude80 Runde starten"):n.a.createElement(W.c,{level:"h4",sx:{textAlign:"center",width:"100%",mt:2,color:"#2C3E50",fontWeight:"bold",background:"rgba(255,255,255,0.7)",borderRadius:"10px",p:2,backdropFilter:"blur(5px)",fontSize:{xs:"0.9rem",sm:"1rem"}}},"\u23f3 Warte auf den Host zum Starten..."),n.a.createElement(i.a,{size:"lg",onClick:async()=>{if(s)try{await E.post(`/api/lobby/${a}/leave`),o("/groups/"+s.group.name)}catch(b){console.error("Error leaving session:",b),o("/groups/"+s.group.name)}},sx:{background:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)",color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},borderRadius:"15px",boxShadow:"0 6px 20px rgba(231, 76, 60, 0.4)",flex:{sm:s&&s.host.username===(null===p||void 0===p?void 0:p.username)?.3:0},"&:hover":{background:"linear-gradient(135deg, #C0392B 0%, #A93226 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(231, 76, 60, 0.5)"}}},"\ud83d\udeaa Verlassen"))))))},ae=a(230);var re=e=>{let{sessionId:t,websocket:a}=e;const[o,s]=Object(r.useState)([]),[l,d]=Object(r.useState)(""),[m,g]=Object(r.useState)(!1),x=Object(r.useRef)(null);Object(r.useEffect)(()=>{x.current&&x.current.scrollIntoView({behavior:"smooth"})},[o]),Object(r.useEffect)(()=>{t&&(async()=>{try{const e=await E.get("/api/game/chat/"+t);s(e.data.messages)}catch(e){console.error("Error loading chat messages:",e)}})()},[t]),Object(r.useEffect)(()=>{if(!a)return;const e=e=>{const t=JSON.parse(e.data);"chat_message"===t.type&&s(e=>[...e,t.message])};return a.addEventListener("message",e),()=>a.removeEventListener("message",e)},[a]);return m?n.a.createElement(L.b,{sx:{position:"fixed",bottom:20,right:20,width:400,height:500,display:"flex",flexDirection:"column",zIndex:1e4,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"25px",boxShadow:"0 15px 50px rgba(102, 126, 234, 0.5)",border:"none",color:"#FFF"}},n.a.createElement(c.a,{sx:{p:2,borderBottom:"1px solid rgba(255,255,255,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",borderRadius:"25px 25px 0 0"}},n.a.createElement(W.c,{level:"h4",sx:{fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)"}},"\ud83d\udcac Live Chat"),n.a.createElement(i.a,{size:"sm",onClick:()=>g(!1),sx:{background:"rgba(255,255,255,0.2)",color:"#FFF",borderRadius:"50%",minWidth:"32px",minHeight:"32px",fontWeight:"bold","&:hover":{background:"rgba(255,255,255,0.3)"}}},"\u2715")),n.a.createElement(c.a,{sx:{flex:1,overflowY:"auto",p:2,maxHeight:350,background:"rgba(255,255,255,0.05)"}},n.a.createElement(ae.a,{spacing:2},0===o.length?n.a.createElement(W.c,{level:"body1",sx:{textAlign:"center",color:"rgba(255,255,255,0.7)",fontStyle:"italic",mt:4}},"Noch keine Nachrichten... \ud83e\udd2b"):o.map(e=>{return n.a.createElement(c.a,{key:e.id,sx:{background:"rgba(255,255,255,0.1)",borderRadius:"12px",p:1.5,backdropFilter:"blur(10px)"}},n.a.createElement(W.c,{level:"body-xs",sx:{color:"rgba(255,255,255,0.8)",fontWeight:"bold",mb:.5}},"\ud83d\udc64 ",e.username," \u2022 ",(t=e.sent_at,new Date(t).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}))),n.a.createElement(W.c,{level:"body1",sx:{color:"#FFF",wordBreak:"break-word"}},e.message));var t}),n.a.createElement("div",{ref:x}))),n.a.createElement(c.a,{sx:{p:2,borderTop:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",borderRadius:"0 0 25px 25px"}},n.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),l.trim())try{await E.post("/api/game/chat",{session_id:t,message:l.trim()}),d("")}catch(a){console.error("Error sending message:",a)}}},n.a.createElement(ae.a,{direction:"row",spacing:1},n.a.createElement(q.a,{placeholder:"Nachricht eingeben...",value:l,onChange:e=>d(e.target.value),sx:{flex:1,background:"rgba(255,255,255,0.9)",borderRadius:"12px",border:"none","&:focus-within":{boxShadow:"0 0 0 2px rgba(255,255,255,0.5)"}}}),n.a.createElement(i.a,{type:"submit",disabled:!l.trim(),sx:{background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",px:3,"&:hover":{background:"linear-gradient(135deg, #44A08D 0%, #3d8f7a 100%)",transform:"translateY(-1px)"},"&:disabled":{background:"rgba(255,255,255,0.3)",color:"rgba(255,255,255,0.6)"}}},"\ud83d\udce4 Senden"))))):n.a.createElement(L.b,{sx:{position:"fixed",bottom:20,right:20,width:250,cursor:"pointer",zIndex:9999,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.4)",border:"none",color:"#FFF"},onClick:()=>g(!0)},n.a.createElement(c.a,{sx:{p:2,textAlign:"center"}},n.a.createElement(W.c,{level:"h4",sx:{fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)"}},"\ud83d\udcac Chat (",o.length,")")))},ne=a(113),oe=a(228);var se=()=>{var e,t,a,o;const{sessionId:s}=Object(S.s)(),l=Object(S.q)(),{getToken:d}=v(),[m,g]=Object(r.useState)(null),[x,b]=Object(r.useState)(null),[u,p]=Object(r.useState)([]),[h,f]=Object(r.useState)({}),[F,w]=Object(r.useState)(null),[k,y]=Object(r.useState)(null),[C,_]=Object(r.useState)(!1),[z,j]=Object(r.useState)(null),[A,R]=Object(r.useState)(!0),[B,D]=Object(r.useState)(null),[I,$]=Object(r.useState)(!1),[q,P]=Object(r.useState)(null),[T,G]=Object(r.useState)(null),[Y,K]=Object(r.useState)(!1);Object(r.useEffect)(()=>(M(),H(),()=>{z&&z.close()}),[s]);const U=async()=>{try{const t=(await E.get("/api/game/state/"+s)).data;if(g(e=>e?{...e,current_question_index:t.current_question_index,current_flashcard_id:t.current_flashcard_id,status:t.status}:t),t.current_question)if(b(t.current_question),"question_ended"===t.status||t.show_result?($(!0),t.question_result&&P(t.question_result)):$(!1),t.current_flashcard_id)try{var e;const a=await E.get(`/api/game/votes/${s}/${t.current_flashcard_id}`);p(a.data.votes||[]),f(a.data.vote_counts||{});const r=(await E.get("/me")).data,n=null===(e=a.data.votes)||void 0===e?void 0:e.find(e=>e.user_id===r.id);n&&w(n.answer_id)}catch(a){console.log("Error loading votes:",a),p([]),f({})}else p([]),f({}),w(null)}catch(a){var t;403===(null===(t=a.response)||void 0===t?void 0:t.status)?(console.log("403 in loadGameState - retrying in 200ms"),setTimeout(()=>{U()},200)):console.log("Error loading game state:",a)}},M=async()=>{try{R(!0);const a=(await E.get("/api/lobby/"+s)).data;y(a);const r=(await E.get("/me")).data;_(a.host.id===r.id);try{const e=(await E.get("/api/game/state/"+s)).data;g(t=>t?{...t,current_question_index:e.current_question_index,current_flashcard_id:e.current_flashcard_id,status:e.status}:e),e.current_question&&b(e.current_question)}catch(t){var e;if(403===(null===(e=t.response)||void 0===e?void 0:e.status))return console.log("Not a participant yet - waiting for auto-join to complete"),void setTimeout(()=>{M()},200);console.log("No game state yet - game not started")}}catch(t){console.error("Error loading session data:",t),D("Fehler beim Laden der Session-Daten")}finally{R(!1)}},H=()=>{const e=d();if(!e)return;const t=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}/ws/${e}`;console.log("Attempting WebSocket connection to:",t);const a=new WebSocket(t);a.onopen=()=>{console.log("Game WebSocket connected successfully!"),a.send(JSON.stringify({type:"join_game",session_id:s}))},a.onerror=e=>{console.error("WebSocket error:",e),console.error("WebSocket URL was:",t)},a.onmessage=e=>{const t=JSON.parse(e.data);Z(t)},a.onclose=()=>{console.log("WebSocket disconnected")},j(a)},Z=e=>{switch(e.type){case"game_joined":console.log("Successfully joined game"),setTimeout(()=>{U()},100);break;case"game_started":g(e.game_state),b(e.question),$(!1),p([]),f({}),w(null);break;case"new_question":case"next_question":b(e.question),$(!1),p([]),f({}),w(null);break;case"vote_update":console.log("\ud83d\udd25 VOTE UPDATE received:",e),console.log("\ud83d\udd25 Setting votes:",e.votes),console.log("\ud83d\udd25 Setting vote counts:",e.vote_counts),p(e.votes||[]),f(e.vote_counts||{});break;case"question_ended":P(e.result),$(!0),g(t=>{if(!t){const t=Math.floor(e.result.total_score/100);return{total_score:e.result.total_score,max_possible_score:e.result.max_possible_score,status:"playing",current_question_index:t,flashcard_count:(e.result.max_possible_score||200)/100,current_flashcard_id:e.result.flashcard_id}}return{...t,total_score:e.result.total_score}});break;case"game_finished":G(e.result),K(!0),m&&g(e=>({...e,status:"finished"}));break;default:console.log("Unhandled WebSocket message type:",e.type)}},J=async()=>{try{R(!0),await E.post("/api/game/start/"+s)}catch(e){console.error("Error starting game:",e),D("Fehler beim Starten des Spiels")}finally{R(!1)}};if(Object(r.useEffect)(()=>{console.log("Auto-start check:",{sessionData:null===k||void 0===k?void 0:k.status,hasGameState:!!m,isHost:C,shouldStart:k&&"playing"===k.status&&!m&&C}),k&&"playing"===k.status&&!m&&C&&(console.log("Auto-starting game..."),J())},[k,m,C,J]),A)return n.a.createElement(c.a,{sx:{p:{xs:2,sm:3,md:4},textAlign:"center"}},n.a.createElement(W.c,{level:"h4"},"Lade Spiel..."));if(B)return n.a.createElement(c.a,{sx:{p:{xs:2,sm:3,md:4}}},n.a.createElement(O.a,{color:"danger"},B),n.a.createElement(i.a,{onClick:()=>l("/groups"),sx:{mt:2}},"Zur\xfcck zu Gruppen"));var V;if(!m||"waiting"===m.status)return n.a.createElement(c.a,{sx:{p:{xs:2,sm:3,md:4},maxWidth:800,margin:"0 auto"}},n.a.createElement(L.b,null,n.a.createElement(ne.b,null,n.a.createElement(W.c,{level:"h2",textAlign:"center",mb:2,sx:{fontSize:{xs:"1.5rem",sm:"2rem"}}},null===k||void 0===k||null===(V=k.subject)||void 0===V?void 0:V.name," Quiz"),n.a.createElement(W.c,{level:"body1",textAlign:"center",mb:4},"Spiel wird gestartet..."),n.a.createElement(c.a,{textAlign:"center"},n.a.createElement(W.c,{level:"body2"},"Bitte warten Sie einen Moment."),k&&"playing"===k.status&&C&&n.a.createElement(W.c,{level:"body2",sx:{mt:1}},"Initialisiere Spiel...")))));if(T&&Y){var Q;const e="won"===T.status;return n.a.createElement(c.a,{sx:{p:{xs:2,sm:3,md:4},maxWidth:800,margin:"0 auto"}},n.a.createElement(L.b,{sx:{background:e?"linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF6347 100%)":"linear-gradient(135deg, #FF7F7F 0%, #FF6B6B 50%, #FF5252 100%)",borderRadius:"30px",boxShadow:e?"0 15px 50px rgba(255, 215, 0, 0.5)":"0 15px 50px rgba(255, 107, 107, 0.5)",position:"relative",overflow:"hidden"}},e&&n.a.createElement(c.a,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle at 20% 80%, #FFD700 0%, transparent 50%), radial-gradient(circle at 80% 20%, #FF6347 0%, transparent 50%), radial-gradient(circle at 40% 40%, #FFA500 0%, transparent 50%)",opacity:.3,zIndex:0}}),n.a.createElement(ne.b,{textAlign:"center",sx:{position:"relative",zIndex:1,p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h1",mb:3,sx:{fontSize:{xs:"2rem",sm:"2.5rem",md:"3.5rem"},fontWeight:"bold",color:"#FFF",textShadow:"0 4px 8px rgba(0,0,0,0.3)",animation:e?"bounce 2s infinite":"none"}},e?"\ud83c\udf86\ud83c\udf89 GEWONNEN! \ud83c\udf89\ud83c\udf86":"\ud83d\ude14\ud83d\udcda VERLOREN \ud83d\udcda\ud83d\ude14"),n.a.createElement(c.a,{sx:{background:"rgba(255,255,255,0.2)",borderRadius:"20px",p:{xs:2,sm:3},mb:3,backdropFilter:"blur(10px)"}},n.a.createElement(W.c,{level:"h2",mb:2,sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.5rem",sm:"2rem"}}},"\ud83c\udfc6 ",T.total_score," / ",T.max_possible_score," Punkte"),n.a.createElement(W.c,{level:"h3",mb:2,sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.25rem",sm:"1.5rem"}}},"\ud83c\udfaf ",null===(Q=T.percentage)||void 0===Q?void 0:Q.toFixed(1),"% richtig")),n.a.createElement(c.a,{sx:{background:"rgba(255,255,255,0.15)",borderRadius:"16px",p:2,mb:4}},e?n.a.createElement(W.c,{level:"h4",sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1rem",sm:"1.25rem"}}},"\u2728 Hervorragend! Ihr habt das Ziel von 90% erreicht! \u2728"):n.a.createElement(W.c,{level:"h4",sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1rem",sm:"1.25rem"}}},"\ud83d\udcaa Ihr habt verloren, da m\xfcsst ihr wohl noch was \xfcben! \ud83d\udcaa")),n.a.createElement(i.a,{onClick:()=>l("/groups"),size:"lg",sx:{background:"linear-gradient(135deg, #2C3E50 0%, #34495E 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"15px",padding:{xs:"10px 20px",sm:"12px 30px"},fontSize:{xs:"16px",sm:"18px"},boxShadow:"0 6px 20px rgba(44, 62, 80, 0.4)","&:hover":{background:"linear-gradient(135deg, #34495E 0%, #2C3E50 100%)",transform:"translateY(-3px)",boxShadow:"0 8px 25px rgba(44, 62, 80, 0.6)"}}},"\ud83c\udfe0 Zur\xfcck zu Gruppen"))),n.a.createElement("style",null,"\n            @keyframes bounce {\n              0%, 20%, 50%, 80%, 100% {\n                transform: translateY(0);\n              }\n              40% {\n                transform: translateY(-10px);\n              }\n              60% {\n                transform: translateY(-5px);\n              }\n            }\n          "))}return n.a.createElement(c.a,{sx:{p:{xs:2,sm:3,md:4},maxWidth:1200,margin:"0 auto"}},n.a.createElement(N.a,{container:!0,spacing:{xs:2,sm:3}},n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{mb:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"20px",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.4)"}},n.a.createElement(ne.b,{sx:{color:"#FFF",textAlign:"center",p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h3",sx:{fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",mb:1,fontSize:{xs:"1.5rem",sm:"2rem"}}},"\ud83c\udfaf ",null===k||void 0===k||null===(e=k.subject)||void 0===e?void 0:e.name," Quiz"),n.a.createElement(W.c,{level:"body1",sx:{mb:2,opacity:.9,fontSize:{xs:"14px",sm:"16px"}}},"\ud83d\udcdd Frage ",(null===x||void 0===x?void 0:x.question_index)+1," von ",null===x||void 0===x?void 0:x.total_questions),n.a.createElement(c.a,{sx:{mb:2,position:"relative"}},n.a.createElement(oe.a,{determinate:!0,value:m&&x?x.question_index/x.total_questions*100:0,sx:{height:{xs:8,sm:12},borderRadius:"6px",background:"rgba(255,255,255,0.2)","& .MuiLinearProgress-bar":{background:"linear-gradient(90deg, #FFD700, #FFA500)",borderRadius:"6px",boxShadow:"0 0 10px rgba(255, 215, 0, 0.6)"}}})),n.a.createElement(W.c,{level:"h4",sx:{fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",background:"rgba(255,255,255,0.15)",borderRadius:"12px",p:{xs:1.5,sm:2},backdropFilter:"blur(10px)",fontSize:{xs:"1.1rem",sm:"1.25rem"}}},"\ud83c\udfc6 ",null===m||void 0===m?void 0:m.total_score," / ",null===m||void 0===m?void 0:m.max_possible_score," Punkte (",(m&&m.max_possible_score>0?m.total_score/m.max_possible_score*100:0).toFixed(1),"%)")))),x&&!I&&n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{mb:3,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"20px",boxShadow:"0 8px 32px rgba(240, 147, 251, 0.4)"}},n.a.createElement(ne.b,{sx:{p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h2",textAlign:"center",mb:4,sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",background:"rgba(255,255,255,0.1)",borderRadius:"16px",p:{xs:2,sm:3},backdropFilter:"blur(10px)",fontSize:{xs:"1.25rem",sm:"1.5rem",md:"2rem"}}},"\ud83e\udd14 ",x.question),n.a.createElement(N.a,{container:!0,spacing:{xs:2,sm:3}},null===(t=x.answers)||void 0===t?void 0:t.map((e,t)=>{const a=h[e.id]||0,r=Object.values(h).reduce((e,t)=>e+t,0),o=r>0?a/r*100:0,l=[{bg:"#FF6B6B",hover:"#FF5252",border:"#FF1744"},{bg:"#4ECDC4",hover:"#26C6DA",border:"#00BCD4"},{bg:"#45B7D1",hover:"#2196F3",border:"#1976D2"},{bg:"#96CEB4",hover:"#66BB6A",border:"#4CAF50"}],i=l[t]||l[0],d=F===e.id;return n.a.createElement(N.a,{xs:6,sm:6,key:e.id},n.a.createElement(L.b,{sx:{cursor:"pointer",background:d?`linear-gradient(135deg, ${i.bg} 0%, ${i.hover} 100%)`:`linear-gradient(135deg, ${i.bg}40 0%, ${i.bg}20 100%)`,border:"3px solid "+(d?i.border:i.bg),borderRadius:"20px",transition:"all 0.3s ease",transform:d?"scale(1.02)":"scale(1)",boxShadow:d?`0 8px 25px ${i.bg}60`:`0 4px 15px ${i.bg}40`,"&:hover":{transform:"scale(1.05)",boxShadow:`0 12px 30px ${i.bg}80`,background:`linear-gradient(135deg, ${i.hover}80 0%, ${i.bg}60 100%)`},minHeight:{xs:"120px",sm:"180px"},position:"relative",overflow:"hidden"},onClick:()=>!I&&(async e=>{const t=(null===x||void 0===x?void 0:x.flashcard_id)||(null===m||void 0===m?void 0:m.current_flashcard_id);if(!t)return console.error("\u274c VOTE DEBUG - No flashcard_id available!",{currentQuestion:x,gameState:m,flashcardId:t}),void D("Flashcard ID nicht verf\xfcgbar");try{const a={session_id:s,flashcard_id:t,answer_id:e};await E.post("/api/game/vote",a);w(e)}catch(n){var a,r;console.error("\u274c VOTE DEBUG - Error casting vote:",{error:n,response:n.response,data:null===(a=n.response)||void 0===a?void 0:a.data,status:null===(r=n.response)||void 0===r?void 0:r.status}),D("Fehler beim Abstimmen")}})(e.id)},n.a.createElement(c.a,{sx:{position:"absolute",top:{xs:10,sm:15},left:{xs:10,sm:15},width:{xs:25,sm:40},height:{xs:25,sm:40},borderRadius:"50%",background:d?"#FFF":i.border,color:d?i.border:"#FFF",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:{xs:"12px",sm:"18px"},boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},String.fromCharCode(65+t)),n.a.createElement(ne.b,{sx:{textAlign:"center",p:{xs:1,sm:3}}},n.a.createElement(W.c,{level:"h4",sx:{color:d?"#FFF":i.border,fontWeight:"bold",mb:2,textShadow:d?"0 2px 4px rgba(0,0,0,0.3)":"none",fontSize:{xs:"0.875rem",sm:"1.25rem"}}},e.text),n.a.createElement(c.a,{sx:{mt:2,background:"rgba(255,255,255,0.3)",borderRadius:"10px",p:1,backdropFilter:"blur(10px)"}},n.a.createElement(W.c,{level:"body2",sx:{color:"#FFF",fontWeight:"bold",mb:1,textShadow:"0 1px 2px rgba(0,0,0,0.5)",fontSize:{xs:"0.875rem",sm:"1rem"}}},a," Stimme",1!==a?"n":""," (",o.toFixed(0),"%)"),n.a.createElement(c.a,{sx:{height:{xs:6,sm:8},borderRadius:"4px",background:"rgba(255,255,255,0.3)",overflow:"hidden"}},n.a.createElement(c.a,{sx:{width:o+"%",height:"100%",background:"#FFF",borderRadius:"4px",transition:"width 0.5s ease"}}))))))})),F&&n.a.createElement(O.a,{sx:{mt:3,background:"rgba(255,255,255,0.9)",borderRadius:"12px",border:"2px solid #4CAF50",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)"}},n.a.createElement(W.c,{sx:{fontWeight:"bold",color:"#2E7D32"}},"\u2705 Sie haben gestimmt. Sie k\xf6nnen Ihre Stimme jederzeit \xe4ndern."))))),I&&q&&!T&&n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{mb:3,background:q.was_correct?"linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%)":"linear-gradient(135deg, #FF5722 0%, #FF9800 100%)",borderRadius:"20px",boxShadow:q.was_correct?"0 8px 32px rgba(76, 175, 80, 0.4)":"0 8px 32px rgba(255, 87, 34, 0.4)"}},n.a.createElement(ne.b,{textAlign:"center",sx:{p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h2",mb:3,sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"2rem",sm:"2.5rem"}}},q.was_correct?"\ud83c\udf89 Richtig!":"\ud83d\ude1e Falsch!"),n.a.createElement(c.a,{sx:{mb:3}},n.a.createElement(W.c,{level:"h4",mb:2,sx:{fontSize:{xs:"1.25rem",sm:"1.5rem"}}},"Richtige Antwort:"),null===x||void 0===x||null===(a=x.answers)||void 0===a?void 0:a.map(e=>{const t=e.id===q.correct_answer_id;e.id,q.winning_answer_id;return t?n.a.createElement(L.b,{key:e.id,sx:{mb:1,background:"linear-gradient(135deg, #66BB6A 0%, #4CAF50 100%)",border:"3px solid #2E7D32",borderRadius:"12px",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)"}},n.a.createElement(ne.b,null,n.a.createElement(W.c,{level:"body1",sx:{fontWeight:"bold",color:"#FFF",textShadow:"0 1px 2px rgba(0,0,0,0.3)",fontSize:{xs:"1rem",sm:"1.1rem"}}},"\u2705 ",e.text))):null}),n.a.createElement(W.c,{level:"h4",mb:2,mt:3,sx:{fontSize:{xs:"1.25rem",sm:"1.5rem"}}},"Eure Antwort:"),null===x||void 0===x||null===(o=x.answers)||void 0===o?void 0:o.map(e=>{const t=e.id===q.winning_answer_id,a=e.id===q.correct_answer_id;return t?n.a.createElement(L.b,{key:e.id,sx:{mb:1,background:a?"linear-gradient(135deg, #66BB6A 0%, #4CAF50 100%)":"linear-gradient(135deg, #EF5350 0%, #F44336 100%)",border:"3px solid "+(a?"#2E7D32":"#C62828"),borderRadius:"12px",boxShadow:a?"0 4px 15px rgba(76, 175, 80, 0.3)":"0 4px 15px rgba(244, 67, 54, 0.3)"}},n.a.createElement(ne.b,null,n.a.createElement(W.c,{level:"body1",sx:{fontWeight:"bold",color:"#FFF",textShadow:"0 1px 2px rgba(0,0,0,0.3)",fontSize:{xs:"1rem",sm:"1.1rem"}}},a?"\u2705":"\u274c"," ",e.text))):null})),n.a.createElement(c.a,{sx:{background:"rgba(255,255,255,0.15)",borderRadius:"16px",p:{xs:2,sm:3},backdropFilter:"blur(10px)",mt:3}},n.a.createElement(W.c,{level:"h4",mb:2,sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.25rem",sm:"1.5rem"}}},q.was_correct?`\ud83c\udf86 +${q.points_earned} Punkte!`:"\ud83d\udeab Keine Punkte"),n.a.createElement(W.c,{level:"body1",sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 1px 2px rgba(0,0,0,0.3)",fontSize:{xs:"1rem",sm:"1.1rem"}}},"\ud83c\udfc6 Aktuelle Punktzahl: ",q.total_score," / ",null===m||void 0===m?void 0:m.max_possible_score))))),C&&n.a.createElement(N.a,{xs:12},n.a.createElement(L.b,{sx:{mb:3,background:"linear-gradient(135deg, #2C3E50 0%, #34495E 100%)",borderRadius:"20px",boxShadow:"0 8px 32px rgba(44, 62, 80, 0.4)"}},n.a.createElement(ne.b,{sx:{p:{xs:2,sm:3}}},n.a.createElement(W.c,{level:"h4",mb:2,sx:{color:"#FFF",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",textAlign:"center",fontSize:{xs:"1.25rem",sm:"1.5rem"}}},"\ud83c\udfae Host-Steuerung"),n.a.createElement(ae.a,{direction:{xs:"column",sm:"row"},spacing:2,sx:{flexWrap:"wrap",justifyContent:"center"}},n.a.createElement(i.a,{onClick:async()=>{if(C)try{await E.post("/api/game/end-question/"+s)}catch(e){console.error("Error ending question:",e),D("Fehler beim Beenden der Frage")}},size:"lg",disabled:I,sx:{background:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",boxShadow:"0 4px 15px rgba(231, 76, 60, 0.3)",fontSize:{xs:"0.9rem",sm:"1rem"},px:{xs:2,sm:3},"&:hover":{background:"linear-gradient(135deg, #C0392B 0%, #A93226 100%)",transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(231, 76, 60, 0.4)"},"&:disabled":{background:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.5)"}}},"\u23f9\ufe0f Voting beenden"),n.a.createElement(i.a,{onClick:async()=>{if(C)try{await E.post("/api/game/next-question/"+s)}catch(e){console.error("Error moving to next question:",e),D("Fehler beim Wechsel zur n\xe4chsten Frage")}},size:"lg",disabled:!I,sx:{background:"linear-gradient(135deg, #27AE60 0%, #229954 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",boxShadow:"0 4px 15px rgba(39, 174, 96, 0.3)",fontSize:{xs:"0.9rem",sm:"1rem"},px:{xs:2,sm:3},"&:hover":{background:"linear-gradient(135deg, #229954 0%, #1E8449 100%)",transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(39, 174, 96, 0.4)"},"&:disabled":{background:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.5)"}}},"\u25b6\ufe0f N\xe4chste Frage"),n.a.createElement(i.a,{onClick:async()=>{if(C)try{await E.post("/api/game/end/"+s)}catch(e){console.error("Error ending game:",e),D("Fehler beim Beenden des Spiels")}},size:"lg",disabled:!I,sx:{background:"linear-gradient(135deg, #F39C12 0%, #E67E22 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",boxShadow:"0 4px 15px rgba(243, 156, 18, 0.3)",fontSize:{xs:"0.9rem",sm:"1rem"},px:{xs:2,sm:3},"&:hover":{background:"linear-gradient(135deg, #E67E22 0%, #D68910 100%)",transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(243, 156, 18, 0.4)"},"&:disabled":{background:"rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.5)"}}},"\ud83c\udfc1 Spiel beenden"),T&&n.a.createElement(i.a,{onClick:()=>K(!0),size:"lg",sx:{background:"linear-gradient(135deg, #8E44AD 0%, #7D3C98 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"12px",boxShadow:"0 4px 15px rgba(142, 68, 173, 0.3)",fontSize:{xs:"0.9rem",sm:"1rem"},px:{xs:2,sm:3},"&:hover":{background:"linear-gradient(135deg, #7D3C98 0%, #6C3483 100%)",transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(142, 68, 173, 0.4)"}}},"\ud83c\udfc6 Endergebnis anzeigen"))))),n.a.createElement(N.a,{xs:12},n.a.createElement(re,{sessionId:s,websocket:z}))))};var le=function(){const e=Object(S.q)(),{login:t}=v(),[a,o]=Object(r.useState)(""),[s,l]=Object(r.useState)(""),[d,m]=Object(r.useState)(""),[g,x]=Object(r.useState)(!1);async function b(){m(""),x(!0);const r=await t(a,s);r.success?e("/groups"):(m(r.error),x(!1))}return n.a.createElement("div",{className:"loginPage"},n.a.createElement(L.b,{sx:{width:{xs:"90%",sm:"24rem",md:"26rem"},maxWidth:"26rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:{xs:"20px",sm:"25px",md:"30px"},boxShadow:"0 20px 60px rgba(102, 126, 234, 0.4)",color:"#FFF",border:"none",padding:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mx:"auto"}},n.a.createElement(W.c,{level:"h2",sx:{textAlign:"center",fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"},fontWeight:"bold",textShadow:"0 3px 6px rgba(0,0,0,0.3)",mb:{xs:2,sm:3}}},"\ud83d\udd10 Login"),d&&n.a.createElement(O.a,{sx:{mb:2,background:"rgba(255,255,255,0.95)",color:"#C0392B",borderRadius:"12px",border:"none"}},d),n.a.createElement(c.a,{sx:{background:"rgba(255,255,255,0.1)",borderRadius:"20px",padding:{xs:"1.5rem",sm:"2rem"},backdropFilter:"blur(10px)"}},n.a.createElement(W.c,{level:"body1",sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textShadow:"0 2px 4px rgba(0,0,0,0.3)",display:"block",mb:1}},"\ud83d\udc64 Benutzername"),n.a.createElement(q.a,{placeholder:"Benutzername eingeben...",value:a,onChange:e=>o(e.target.value),disabled:g,sx:{background:"rgba(255,255,255,0.95)",borderRadius:"12px",border:"none",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"},padding:{xs:"0.75rem",sm:"1rem"}}}),n.a.createElement(W.c,{level:"body1",sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textShadow:"0 2px 4px rgba(0,0,0,0.3)",display:"block",mb:1}},"\ud83d\udd12 Passwort"),n.a.createElement(q.a,{placeholder:"Passwort eingeben...",value:s,type:"password",onChange:e=>l(e.target.value),disabled:g,onKeyPress:e=>"Enter"===e.key&&b(),sx:{background:"rgba(255,255,255,0.95)",borderRadius:"12px",border:"none",mb:3,fontSize:{xs:"0.9rem",sm:"1rem"},padding:{xs:"0.75rem",sm:"1rem"}}}),n.a.createElement(i.a,{onClick:()=>b(),loading:g,disabled:g,fullWidth:!0,sx:{background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"15px",fontSize:{xs:"1rem",sm:"1.1rem",md:"1.2rem"},padding:{xs:"10px",sm:"12px"},boxShadow:"0 6px 20px rgba(78, 205, 196, 0.4)","&:hover":{background:"linear-gradient(135deg, #44A08D 0%, #3d8f7a 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(78, 205, 196, 0.6)"}}},"\ud83d\ude80 Anmelden"),n.a.createElement(W.c,{level:"body1",sx:{mt:3,textAlign:"center",color:"#FFF",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"0.9rem",sm:"1rem"}}},"Noch kein Konto?"," ",n.a.createElement(w.b,{to:"/register",style:{color:"#4ECDC4",textDecoration:"none",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)"}},"Jetzt registrieren \ud83d\udcdd")))))};var ie=()=>{const e=Object(S.q)(),{register:t}=v(),[a,o]=Object(r.useState)({username:"",email:"",password:"",confirmPassword:""}),[s,l]=Object(r.useState)(""),[d,m]=Object(r.useState)(!1),[g,x]=Object(r.useState)(0),b=e=>{const{name:t,value:a}=e.target;o(e=>({...e,[t]:a})),"password"===t&&x((e=>{let t=0;return e.length>=6&&(t+=25),e.length>=10&&(t+=25),/[a-z]/.test(e)&&/[A-Z]/.test(e)&&(t+=25),/\d/.test(e)&&(t+=12.5),/[^a-zA-Z\d]/.test(e)&&(t+=12.5),t})(a))};return n.a.createElement(c.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundImage:"url(/background.jpeg)",backgroundSize:"cover",backgroundPosition:"center",padding:{xs:2,sm:3}}},n.a.createElement(L.b,{sx:{width:{xs:"100%",sm:"450px",md:"500px"},maxWidth:"500px",p:{xs:2,sm:3,md:4},background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:{xs:"20px",sm:"25px",md:"30px"},boxShadow:"0 20px 60px rgba(240, 147, 251, 0.4)",color:"#FFF",border:"none",mx:"auto"}},n.a.createElement(W.c,{level:"h2",sx:{mb:{xs:2,sm:3},textAlign:"center",fontWeight:"bold",textShadow:"0 3px 6px rgba(0,0,0,0.3)",fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"}}},"\ud83d\udcdd Registrierung"),s&&n.a.createElement(O.a,{sx:{mb:2,background:"rgba(255,255,255,0.95)",color:"#C0392B",borderRadius:"12px",border:"none"}},s),n.a.createElement(c.a,{sx:{background:"rgba(255,255,255,0.1)",borderRadius:"20px",padding:{xs:"1.5rem",sm:"2rem"},backdropFilter:"blur(10px)"}},n.a.createElement("form",{onSubmit:async r=>{if(r.preventDefault(),l(""),!a.username)return void l("Benutzername ist erforderlich");if(!a.email)return void l("E-Mail-Adresse ist erforderlich");if(!a.password)return void l("Passwort ist erforderlich");if(!a.confirmPassword)return void l("Passwort best\xe4tigen ist erforderlich");if(a.password!==a.confirmPassword)return void l("Passw\xf6rter stimmen nicht \xfcberein");if(a.password.length<6)return void l("Passwort muss mindestens 6 Zeichen lang sein");m(!0);const n=await t(a.username,a.email,a.password);if(n.success)e("/groups");else{let e=n.error;n.error.includes("Username must contain only letters and numbers")?e="Benutzername darf nur Buchstaben und Zahlen enthalten":n.error.includes("Username already registered")?e="Benutzername ist bereits registriert":n.error.includes("Email already registered")?e="E-Mail-Adresse ist bereits registriert":n.error.includes("valid email")||n.error.includes("email")&&n.error.includes("invalid")?e="Bitte geben Sie eine g\xfcltige E-Mail-Adresse ein":n.error.includes("Username must be at least 3 characters")&&(e="Benutzername muss mindestens 3 Zeichen lang sein"),l(e),m(!1)}}},n.a.createElement(M.a,{sx:{mb:2}},n.a.createElement(H.a,{sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textShadow:"0 2px 4px rgba(0,0,0,0.3)",mb:1}},"\ud83d\udc64 Benutzername"),n.a.createElement(q.a,{name:"username",value:a.username,onChange:b,placeholder:"Mindestens 3 Zeichen",disabled:d,sx:{background:"rgba(255,255,255,0.95)",borderRadius:"12px",border:"none",fontSize:{xs:"0.9rem",sm:"1rem"},padding:{xs:"0.75rem",sm:"1rem"}}})),n.a.createElement(M.a,{sx:{mb:2}},n.a.createElement(H.a,{sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textShadow:"0 2px 4px rgba(0,0,0,0.3)",mb:1}},"\ud83d\udce7 E-Mail"),n.a.createElement(q.a,{name:"email",type:"text",value:a.email,onChange:b,placeholder:"name@example.com",disabled:d,sx:{background:"rgba(255,255,255,0.95)",borderRadius:"12px",border:"none",fontSize:{xs:"0.9rem",sm:"1rem"},padding:{xs:"0.75rem",sm:"1rem"}}})),n.a.createElement(M.a,{sx:{mb:1}},n.a.createElement(H.a,{sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textShadow:"0 2px 4px rgba(0,0,0,0.3)",mb:1}},"\ud83d\udd12 Passwort"),n.a.createElement(q.a,{name:"password",type:"password",value:a.password,onChange:b,placeholder:"Mindestens 6 Zeichen",disabled:d,sx:{background:"rgba(255,255,255,0.95)",borderRadius:"12px",border:"none",fontSize:{xs:"0.9rem",sm:"1rem"},padding:{xs:"0.75rem",sm:"1rem"}}})),a.password&&n.a.createElement(c.a,{sx:{mb:2}},n.a.createElement(W.c,{level:"body-xs",sx:{mb:.5,color:"#FFF"}},"Passwortst\xe4rke"),n.a.createElement(oe.a,{determinate:!0,value:g,color:g<40?"danger":g<70?"warning":"success",size:"sm"})),n.a.createElement(M.a,{sx:{mb:3}},n.a.createElement(H.a,{sx:{color:"#FFF",fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"},textShadow:"0 2px 4px rgba(0,0,0,0.3)",mb:1}},"\ud83d\udd01 Passwort best\xe4tigen"),n.a.createElement(q.a,{name:"confirmPassword",type:"password",value:a.confirmPassword,onChange:b,placeholder:"Passwort wiederholen",disabled:d,sx:{background:"rgba(255,255,255,0.95)",borderRadius:"12px",border:"none",fontSize:{xs:"0.9rem",sm:"1rem"},padding:{xs:"0.75rem",sm:"1rem"}}})),n.a.createElement(i.a,{type:"submit",fullWidth:!0,loading:d,sx:{mb:3,background:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",color:"#FFF",fontWeight:"bold",borderRadius:"15px",fontSize:{xs:"1rem",sm:"1.1rem",md:"1.2rem"},padding:{xs:"10px",sm:"12px"},boxShadow:"0 6px 20px rgba(78, 205, 196, 0.4)","&:hover":{background:"linear-gradient(135deg, #44A08D 0%, #3d8f7a 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(78, 205, 196, 0.6)"}}},"\ud83d\ude80 Registrieren"),n.a.createElement(W.c,{level:"body1",sx:{textAlign:"center",color:"#FFF",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"0.9rem",sm:"1rem"}}},"Bereits registriert?"," ",n.a.createElement(w.b,{to:"/",style:{color:"#4ECDC4",textDecoration:"none",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)"}},"Zum Login \ud83d\udd11"))))))},ce=a(122);var de=e=>{let{children:t}=e;const{isAuthenticated:a,loading:r}=v();return r?n.a.createElement(c.a,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},n.a.createElement(ce.a,null)):a?t:n.a.createElement(S.a,{to:"/",replace:!0})};var me=function(){return n.a.createElement(F,null,n.a.createElement(w.a,null,n.a.createElement(D,null),n.a.createElement(S.d,null,n.a.createElement(S.b,{path:"/",element:n.a.createElement(le,null)}),n.a.createElement(S.b,{path:"/register",element:n.a.createElement(ie,null)}),n.a.createElement(S.b,{path:"/groups",element:n.a.createElement(de,null,n.a.createElement(ee,null))}),n.a.createElement(S.b,{path:"/groups/:groupName",element:n.a.createElement(de,null,n.a.createElement(X,null))}),n.a.createElement(S.b,{path:"/groups/:groupName/:subject",element:n.a.createElement(de,null,n.a.createElement(V,null))}),n.a.createElement(S.b,{path:"/lobby/:sessionId",element:n.a.createElement(de,null,n.a.createElement(te,null))}),n.a.createElement(S.b,{path:"/game/:sessionId",element:n.a.createElement(de,null,n.a.createElement(se,null))})),n.a.createElement(Q,null)))};var ge=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,231)).then(t=>{let{getCLS:a,getFID:r,getFCP:n,getLCP:o,getTTFB:s}=t;a(e),r(e),n(e),o(e),s(e)})};s.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(me,null))),ge()}},[[141,1,2]]]);